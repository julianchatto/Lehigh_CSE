<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: PostPage.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: PostPage.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { useParams, Link } from "react-router-dom";
import { useContext, useState, useEffect } from 'react';
import DataContext from './context/DataContext';
import useAxiosFetch from './hooks/useAxiosFetch';
import Comment from './Comment.js';


const backendURL = "https://team-ducks.dokku.cse.lehigh.edu";
/**
 * Page for when a user clicks on a post
 * @returns the PostPage component
 */
const PostPage = ( user ) => {
    const { posts } = useContext(DataContext);
    const { id } = useParams();
    const post = posts.find(post => post.ID === Number(id));
    const [comments, setComments] = useState([]);

    
    const { data, fetchError, isLoading } = useAxiosFetch(`${backendURL}/posts/${id}/comments`)

    useEffect(() => {
        setComments(data);
    }, [data]);
    /**
     * Renders the PostPage component
     */
    return (
        &lt;main className="PostPage">
            &lt;article className="post">
                {isLoading &amp;&amp; &lt;h2>Loading...&lt;/h2>}
                {post &amp;&amp; !fetchError &amp;&amp; !isLoading &amp;&amp;
                    &lt;>
                        &lt;h2>Message: {post.Subject}&lt;/h2>
                        &lt;p className="postBody">Subject: {post.Message}&lt;/p>
                        &lt;Link to={`/post/${id}/comments`}>&lt;button className="newCommentButton">New Comment&lt;/button>&lt;/Link>
                        &lt;br />
                        &lt;br />
                    &lt;/> 
                }
                {data &amp;&amp; data.length !==0 &amp;&amp; !fetchError &amp;&amp; !isLoading &amp;&amp;
                    &lt;>
                        Comments:
                        {comments.map(comment => (
                            &lt;Comment key={comment.ID} comment={comment} curUser={user} />
                        ))}
                    &lt;/>
                }
                {!post &amp;&amp;
                    &lt;>
                        &lt;h2>Post Not Found&lt;/h2>
                        &lt;p>
                            &lt;Link to='/'>Back&lt;/Link>
                        &lt;/p>
                    &lt;/>
                }
                {data.length === 0 &amp;&amp; !isLoading &amp;&amp; &lt;h2>No Comments Yet&lt;/h2>}

            &lt;/article>
        &lt;/main>
    )
}

export default PostPage</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#Comment">Comment</a></li><li><a href="global.html#EditProfile">EditProfile</a></li><li><a href="global.html#Feed">Feed</a></li><li><a href="global.html#Header">Header</a></li><li><a href="global.html#Home">Home</a></li><li><a href="global.html#Nav">Nav</a></li><li><a href="global.html#NewComment">NewComment</a></li><li><a href="global.html#NewPost">NewPost</a></li><li><a href="global.html#Post">Post</a></li><li><a href="global.html#PostPage">PostPage</a></li><li><a href="global.html#Profile">Profile</a></li><li><a href="global.html#User">User</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Sun Apr 14 2024 20:12:54 GMT-0400 (Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
